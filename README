nsproxy
====================

nsproxy is a Linux-specific command-line tool, makes almost any application
force to use a specific SOCKS5 or HTTP proxy.

Functionally similar to tsocks / proxychains-ng / graftcp, but using a
completely different mechanism. It has the following features:

 - Works on static linked application.
 - Supported UDP protocol.
 - Supported DNS Hijacking.
 - No privilege required.


USAGE
----------

nsproxy [-h] [-s <server>] [-p <port>] [-d <dns>] [command]

Examples:
  # Use socks5 proxy
  nsproxy nslookup google.com

  # Use http proxy
  nsproxy -h curl https://api.ipify.org

Options:
  -h
    Use http proxy, not socks5.
    Note: UDP is **NOT** supported in http proxy. UDP packets will drop and got
          an ICMP port unreachable message.

  -s server
    Proxy server address.
    Default vaule is "127.0.0.1"

  -p port
    Proxy server port.
    Default value is "1080" for socks, "8080" for http

  -d dns
    DNS hijacking, allow following options:
      -d off
        Disable DNS hijacking, send DNS requests directly by local network (not proxied).
      -d proxy
        Disable DNS hijacking, treat DNS requests as normal UDP packets and proxied.
      -d tcp://<nameserver_ipaddress>
        Redirect DNS requests to specified TCP nameserver, requests will proxied.
      -d udp://<nameserver_ipaddress>
        Redirect DNS requests to specified UDP nameserver, requests will proxied.
    Default value is "tcp://8.8.8.8"


KNOWN ISSUE
----------

All {uid,gid} except the current user will be mapped to
/proc/sys/kernel/overflow{uid,gid}

That's means file owners except the current user will be shown as 'nobody',
and program like sudo / su will not work.


W.I.P
----------

 - fullcone NAT
 - IPv6 support
 - fake DNS
